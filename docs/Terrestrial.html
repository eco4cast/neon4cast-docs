<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.146">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>NEON Ecological Forecasting Challenge Documentation - 2&nbsp; Theme: Terrestrial Ecosystems</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Ticks.html" rel="next">
<link href="./Aquatics.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Terrestrial.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Theme: Terrestrial Ecosystems</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./images/EFI_Logo-1.jpg" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">NEON Ecological Forecasting Challenge Documentation</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Aquatics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Theme: Aquatic Ecosystems</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Terrestrial.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Theme: Terrestrial Ecosystems</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Ticks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Theme: Tick Populations</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Phenology.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Theme: Phenology</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Beetles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Theme: Beetle Communities</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Evaluation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">How did my forecast perform?</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Shared-Forecast-Drivers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Meteorology Inputs</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./UseInCourse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Using the Challenge in Classes</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./contributors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Contributors</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./FAQ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Frequently Asked Questions</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./WorkflowExample.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Example Forecast Workflow</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./container.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Docker Container</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview"><span class="header-section-number">2.1</span> Overview</a></li>
  <li><a href="#challenge" id="toc-challenge" class="nav-link" data-scroll-target="#challenge"><span class="header-section-number">2.2</span> Challenge</a></li>
  <li><a href="#data-targets" id="toc-data-targets" class="nav-link" data-scroll-target="#data-targets"><span class="header-section-number">2.3</span> Data: Targets</a>
  <ul class="collapse">
  <li><a href="#net-ecosystem-exchange" id="toc-net-ecosystem-exchange" class="nav-link" data-scroll-target="#net-ecosystem-exchange"><span class="header-section-number">2.3.1</span> Net ecosystem exchange</a></li>
  <li><a href="#latent-heat-flux" id="toc-latent-heat-flux" class="nav-link" data-scroll-target="#latent-heat-flux"><span class="header-section-number">2.3.2</span> Latent heat flux</a></li>
  <li><a href="#focal-sites" id="toc-focal-sites" class="nav-link" data-scroll-target="#focal-sites"><span class="header-section-number">2.3.3</span> Focal sites</a></li>
  <li><a href="#minute-target-data-calculation" id="toc-minute-target-data-calculation" class="nav-link" data-scroll-target="#minute-target-data-calculation"><span class="header-section-number">2.3.4</span> 30-minute target data calculation</a></li>
  <li><a href="#daily-target-data-calculation" id="toc-daily-target-data-calculation" class="nav-link" data-scroll-target="#daily-target-data-calculation"><span class="header-section-number">2.3.5</span> Daily target data calculation</a></li>
  </ul></li>
  <li><a href="#flux-data-latency" id="toc-flux-data-latency" class="nav-link" data-scroll-target="#flux-data-latency"><span class="header-section-number">2.4</span> Flux data latency</a></li>
  <li><a href="#site-table" id="toc-site-table" class="nav-link" data-scroll-target="#site-table"><span class="header-section-number">2.5</span> Site table</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Theme: Terrestrial Ecosystems</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><strong>What:</strong> Net ecosystem exchange(NEE) of CO<sub>2</sub> and evapotranspiration in terrestrial ecosystems</p>
<p><strong>Where</strong>: 47 NEON sites across the U.S. and Puerto Rico.</p>
<p><strong>When</strong>: Daily forecasts for at least 30-days in the future are accepted at any time. The only requirement is that submissions are predictions of the future at the time the forecast is submitted.</p>
<p><strong>Why:</strong> Carbon and water cycling are fundamental for climate and water regulation services provided by ecosystems</p>
<section id="overview" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="overview"><span class="header-section-number">2.1</span> Overview</h2>
<p>The exchange of water and carbon dioxide between the atmosphere and the land is akin to earth’s terrestrial ecosystems breathing rate and lung capacity. One of the best ways to monitor changes in the amount of carbon and water in an ecosystem is the eddy-covariance method. This method observes the net amount of carbon and water entering and exiting ecosystems at half-hourly timesteps, which is important because it can provide information on ecosystem processes such as photosynthesis, respiration, and transpiration, their sensitivities to ongoing climate and land use change, and greenhouse gas budgets for carbon accounting and natural climate solutions. Forecasts of carbon uptake and release along with water use can provide insights into future production of food, fiber, timber, and carbon credits. Additionally, forecasts will highlight the influence that stress and disturbance have on carbon and water cycling.</p>
</section>
<section id="challenge" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="challenge"><span class="header-section-number">2.2</span> Challenge</h2>
<p>This forecasting challenge asks teams to forecast net ecosystem exchange of carbon dioxide (NEE) and latent heat flux of evapotranspiration (LE) across 47 NEON sites with differing climates. Forecasts can be submitted the 30-minute and/or daily time step over the next 30-days.</p>
<p>Teams are asked to submit their forecast of NEE and LE, along with uncertainty estimates. Any existing NEE and LE data may be used to build and improve the models used to generate forecasts. Other data can be used to generate forecasts.</p>
</section>
<section id="data-targets" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="data-targets"><span class="header-section-number">2.3</span> Data: Targets</h2>
<p>The challenge uses the following NEON data products:</p>
<p><a href="https://data.neonscience.org/data-products/DP4.00200.001" target="_blank">DP4.00200.001</a>: Bundled data products - eddy covariance</p>
<p>A file with previously released NEON data that has been processed into “targets” is provided below. The same processing will be applied to new data that are used for forecast evaluation.</p>
<section id="net-ecosystem-exchange" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="net-ecosystem-exchange"><span class="header-section-number">2.3.1</span> Net ecosystem exchange</h3>
<p><strong>Definition</strong></p>
<p>Net ecosystem exchange (NEE) is the net movement of carbon dioxide from the atmosphere to the ecosystem. At the 30-minute time resolution it is reported as <span class="math inline">\(\mu\)</span>mol CO<sub>2</sub> m<sup>-2</sup> s<sup>-1</sup>. At the daily time resolution it is reported as g C m<sup>-2</sup> day<sup>-1</sup>. Negative values correspond to an ecosystem absorbing CO<sup>2</sup> from the atmosphere, positive values correspond to an ecosystem emitting CO<sub>2</sub> to the atmosphere.</p>
<p><strong>Motivation</strong></p>
<p>NEE quantifies the net exchange of CO<sub>2</sub> between the ecosystem and the atmosphere over that 30-minute or daily time period. Assessing skill at predicting 1/2 hourly - sub daily measurements provides more insight into ability to capture diel processes. The diel curve contains information on how plants and soil immediately respond to variations in meteorology.</p>
<p>Making daily predictions will allow us to rapidly assess skill and provide information in a timeframe pertinent to inform and implement natural resource management. It also allows for models that do not produce sub-daily estimates to participate</p>
</section>
<section id="latent-heat-flux" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="latent-heat-flux"><span class="header-section-number">2.3.2</span> Latent heat flux</h3>
<p><strong>Definition</strong></p>
<p>Latent heat flux is the movement of water as water vapor from the ecosystem to the atmosphere. It is reported as W m<sup>-2</sup> (equivalent to J m<sup>-2</sup> s<sup>-1</sup>). At the daily time resolution it is reported as mean W m<sup>-2</sup>. Positive values correspond to a transfer of water vapor from the ecosystem to the atmosphere.</p>
<p><strong>Motivation</strong></p>
<p>Latent heat measures the water loss from an ecosystem to the atmosphere through evapotranspiration (transpiration through plants + evaporation from surfaces).</p>
<p>Forecasting latent heat (evapotranspiration) can provide insights to water stress for plants and the efficiency that plants are using water relative to NEE, and to the amount of liquid water remaining in the soil for soil moisture forecasting</p>
</section>
<section id="focal-sites" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="focal-sites"><span class="header-section-number">2.3.3</span> Focal sites</h3>
<p>Information on the sites can be found here:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>site_data <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"https://raw.githubusercontent.com/eco4cast/neon4cast-targets/main/NEON_Field_Site_Metadata_20220412.csv"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(terrestrial <span class="sc">==</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>with full site table at the end of this page.</p>
<p>The distribution of sites across ecosystems types is:</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 92%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Vegetation type</th>
<th style="text-align: right;">Count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Evergreen Forest</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">Evergreen Forest|Shrub/Scrub</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Deciduous Forest|Evergreen Forest|Mixed Forest|Woody Wetlands</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Evergreen Forest|Grassland/Herbaceous|Shrub/Scrub</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Grassland/Herbaceous</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cultivated Crops</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Deciduous Forest|Evergreen Forest|Mixed Forest</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Deciduous Forest|Evergreen Forest|Pasture/Hay</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Deciduous Forest|Grassland/Herbaceous</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Deciduous Forest|Mixed Forest|Woody Wetlands</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Deciduous Forest|Pasture/Hay</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Shrub/Scrub</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cultivated Crops|Deciduous Forest</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cultivated Crops|Deciduous Forest|Evergreen Forest|Mixed Forest</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cultivated Crops|Grassland/Herbaceous|Pasture/Hay</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Deciduous Forest</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Deciduous Forest|Evergreen Forest</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Deciduous Forest|Woody Wetlands</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Dwarf Scrub|Evergreen Forest|Shrub/Scrub</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Dwarf Scrub|Shrub/Scrub</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Emergent Herbaceous Wetlands</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Emergent Herbaceous Wetlands|Evergreen Forest|Woody Wetlands</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Emergent Herbaceous Wetlands|Grassland/Herbaceous</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Evergreen Forest|Grassland/Herbaceous</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Evergreen Forest|Shrub/Scrub|Woody Wetlands</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Evergreen Forest|Woody Wetlands</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Grassland/Herbaceous|Shrub/Scrub</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Pasture/Hay|Woody Wetlands</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="minute-target-data-calculation" class="level3" data-number="2.3.4">
<h3 data-number="2.3.4" class="anchored" data-anchor-id="minute-target-data-calculation"><span class="header-section-number">2.3.4</span> 30-minute target data calculation</h3>
<p>To create the data for evaluation (and training) for NEE and LE we extract NEE and LE that pass the turbulence quality control flags (<code>qfqm.fluxCo2.turb.qfFinl</code> = 0 ) provided by NEON and has flux values between -50 and 50 umol CO2 m<sup>-2</sup> s<sup>-1</sup>.</p>
</section>
<section id="daily-target-data-calculation" class="level3" data-number="2.3.5">
<h3 data-number="2.3.5" class="anchored" data-anchor-id="daily-target-data-calculation"><span class="header-section-number">2.3.5</span> Daily target data calculation</h3>
<p>To evaluate the models that produce daily flux forecasts, we select only days with at least 24 of 48 half-hours that pass the quality control flags. For these days, we average the half-hours and convert carbon to daily units (gC/m2/day).</p>
</section>
</section>
<section id="flux-data-latency" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="flux-data-latency"><span class="header-section-number">2.4</span> Flux data latency</h2>
<p>NEON data officially releases the flux data on their data portal and API in monthly data packages. Data for a given month is scheduled to be released around the 15th of the following month.</p>
<p>NEON is also processing flux data with only a 5 day delay (latency). Any data that has been processed but not included in a released monthly package is available on NEON s3 storage. The list of files that can be downloaded can found <a href="https://s3.data.neonscience.org/neon-sae-files/ods/sae_files_unpublished/sae_file_url_unpublished.csv">here</a>.</p>
<p>Our targets file is the combination of NEON’s monthly releases and the files on the s3 bucket. As a result, flux data within 5-days of the restart of a forecast are available to inform the forecast.</p>
<p>The reduction of the latency from monthly to 5-days allows this theme to forecast in real-time - a major advancement for this forecasting challenge. Thank you NEON!</p>
</section>
<section id="site-table" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="site-table"><span class="header-section-number">2.5</span> Site table</h2>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 3%">
<col style="width: 28%">
<col style="width: 37%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">siteID</th>
<th style="text-align: left;">site name</th>
<th style="text-align: left;">vegetation type</th>
<th style="text-align: right;">latitude</th>
<th style="text-align: right;">longtitude</th>
<th style="text-align: left;">NEON site URL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ABBY</td>
<td style="text-align: left;">Abby Road NEON</td>
<td style="text-align: left;">Evergreen Forest|Grassland/Herbaceous|Shrub/Scrub</td>
<td style="text-align: right;">45.76244</td>
<td style="text-align: right;">-122.33032</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/abby</td>
</tr>
<tr class="even">
<td style="text-align: left;">BARR</td>
<td style="text-align: left;">Utqiaġvik NEON</td>
<td style="text-align: left;">Emergent Herbaceous Wetlands</td>
<td style="text-align: right;">71.28241</td>
<td style="text-align: right;">-156.61936</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/barr</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BART</td>
<td style="text-align: left;">Bartlett Experimental Forest NEON</td>
<td style="text-align: left;">Deciduous Forest|Evergreen Forest|Mixed Forest</td>
<td style="text-align: right;">44.06389</td>
<td style="text-align: right;">-71.28737</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/bart</td>
</tr>
<tr class="even">
<td style="text-align: left;">BLAN</td>
<td style="text-align: left;">Blandy Experimental Farm NEON</td>
<td style="text-align: left;">Deciduous Forest|Pasture/Hay</td>
<td style="text-align: right;">39.03370</td>
<td style="text-align: right;">-78.04179</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/blan</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BONA</td>
<td style="text-align: left;">Caribou-Poker Creeks Research Watershed NEON</td>
<td style="text-align: left;">Deciduous Forest|Evergreen Forest|Mixed Forest|Woody Wetlands</td>
<td style="text-align: right;">65.15401</td>
<td style="text-align: right;">-147.50258</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/bona</td>
</tr>
<tr class="even">
<td style="text-align: left;">CLBJ</td>
<td style="text-align: left;">Lyndon B. Johnson National Grassland NEON</td>
<td style="text-align: left;">Deciduous Forest|Grassland/Herbaceous</td>
<td style="text-align: right;">33.40123</td>
<td style="text-align: right;">-97.57000</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/clbj</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CPER</td>
<td style="text-align: left;">Central Plains Experimental Range NEON</td>
<td style="text-align: left;">Grassland/Herbaceous</td>
<td style="text-align: right;">40.81554</td>
<td style="text-align: right;">-104.74559</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/cper</td>
</tr>
<tr class="even">
<td style="text-align: left;">DCFS</td>
<td style="text-align: left;">Dakota Coteau Field Site NEON</td>
<td style="text-align: left;">Grassland/Herbaceous</td>
<td style="text-align: right;">47.16165</td>
<td style="text-align: right;">-99.10656</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/dcfs</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DEJU</td>
<td style="text-align: left;">Delta Junction NEON</td>
<td style="text-align: left;">Evergreen Forest|Shrub/Scrub|Woody Wetlands</td>
<td style="text-align: right;">63.88112</td>
<td style="text-align: right;">-145.75136</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/deju</td>
</tr>
<tr class="even">
<td style="text-align: left;">DELA</td>
<td style="text-align: left;">Dead Lake NEON</td>
<td style="text-align: left;">Evergreen Forest|Woody Wetlands</td>
<td style="text-align: right;">32.54173</td>
<td style="text-align: right;">-87.80388</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/dela</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DSNY</td>
<td style="text-align: left;">Disney Wilderness Preserve NEON</td>
<td style="text-align: left;">Pasture/Hay|Woody Wetlands</td>
<td style="text-align: right;">28.12505</td>
<td style="text-align: right;">-81.43619</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/dsny</td>
</tr>
<tr class="even">
<td style="text-align: left;">GRSM</td>
<td style="text-align: left;">Great Smoky Mountains National Park NEON</td>
<td style="text-align: left;">Deciduous Forest|Evergreen Forest</td>
<td style="text-align: right;">35.68896</td>
<td style="text-align: right;">-83.50195</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/grsm</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GUAN</td>
<td style="text-align: left;">Guanica Forest NEON</td>
<td style="text-align: left;">Evergreen Forest</td>
<td style="text-align: right;">17.96955</td>
<td style="text-align: right;">-66.86870</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/guan</td>
</tr>
<tr class="even">
<td style="text-align: left;">HARV</td>
<td style="text-align: left;">Harvard Forest &amp; Quabbin Watershed NEON</td>
<td style="text-align: left;">Deciduous Forest|Evergreen Forest|Mixed Forest|Woody Wetlands</td>
<td style="text-align: right;">42.53691</td>
<td style="text-align: right;">-72.17265</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/harv</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HEAL</td>
<td style="text-align: left;">Healy NEON</td>
<td style="text-align: left;">Dwarf Scrub|Evergreen Forest|Shrub/Scrub</td>
<td style="text-align: right;">63.87580</td>
<td style="text-align: right;">-149.21335</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/heal</td>
</tr>
<tr class="even">
<td style="text-align: left;">JERC</td>
<td style="text-align: left;">The Jones Center At Ichauway NEON</td>
<td style="text-align: left;">Cultivated Crops|Deciduous Forest|Evergreen Forest|Mixed Forest</td>
<td style="text-align: right;">31.19484</td>
<td style="text-align: right;">-84.46862</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/jerc</td>
</tr>
<tr class="odd">
<td style="text-align: left;">JORN</td>
<td style="text-align: left;">Jornada Experimental Range NEON</td>
<td style="text-align: left;">Shrub/Scrub</td>
<td style="text-align: right;">32.59069</td>
<td style="text-align: right;">-106.84254</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/jorn</td>
</tr>
<tr class="even">
<td style="text-align: left;">KONA</td>
<td style="text-align: left;">Konza Prairie Agroecosystem NEON</td>
<td style="text-align: left;">Cultivated Crops</td>
<td style="text-align: right;">39.11045</td>
<td style="text-align: right;">-96.61293</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/kona</td>
</tr>
<tr class="odd">
<td style="text-align: left;">KONZ</td>
<td style="text-align: left;">Konza Prairie Biological Station NEON</td>
<td style="text-align: left;">Deciduous Forest|Grassland/Herbaceous</td>
<td style="text-align: right;">39.10077</td>
<td style="text-align: right;">-96.56307</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/konz</td>
</tr>
<tr class="even">
<td style="text-align: left;">LAJA</td>
<td style="text-align: left;">Lajas Experimental Station NEON</td>
<td style="text-align: left;">Cultivated Crops|Grassland/Herbaceous|Pasture/Hay</td>
<td style="text-align: right;">18.02126</td>
<td style="text-align: right;">-67.07689</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/laja</td>
</tr>
<tr class="odd">
<td style="text-align: left;">LENO</td>
<td style="text-align: left;">Lenoir Landing NEON</td>
<td style="text-align: left;">Deciduous Forest|Woody Wetlands</td>
<td style="text-align: right;">31.85386</td>
<td style="text-align: right;">-88.16118</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/leno</td>
</tr>
<tr class="even">
<td style="text-align: left;">MLBS</td>
<td style="text-align: left;">Mountain Lake Biological Station NEON</td>
<td style="text-align: left;">Deciduous Forest</td>
<td style="text-align: right;">37.37831</td>
<td style="text-align: right;">-80.52485</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/mlbs</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MOAB</td>
<td style="text-align: left;">Moab NEON</td>
<td style="text-align: left;">Evergreen Forest|Shrub/Scrub</td>
<td style="text-align: right;">38.24828</td>
<td style="text-align: right;">-109.38827</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/moab</td>
</tr>
<tr class="even">
<td style="text-align: left;">NIWO</td>
<td style="text-align: left;">Niwot Ridge NEON</td>
<td style="text-align: left;">Evergreen Forest|Grassland/Herbaceous</td>
<td style="text-align: right;">40.05425</td>
<td style="text-align: right;">-105.58237</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/niwo</td>
</tr>
<tr class="odd">
<td style="text-align: left;">NOGP</td>
<td style="text-align: left;">Northern Great Plains Research Laboratory NEON</td>
<td style="text-align: left;">Grassland/Herbaceous</td>
<td style="text-align: right;">46.76972</td>
<td style="text-align: right;">-100.91535</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/nogp</td>
</tr>
<tr class="even">
<td style="text-align: left;">OAES</td>
<td style="text-align: left;">Marvin Klemme Range Research Station NEON</td>
<td style="text-align: left;">Grassland/Herbaceous|Shrub/Scrub</td>
<td style="text-align: right;">35.41060</td>
<td style="text-align: right;">-99.05878</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/oaes</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ONAQ</td>
<td style="text-align: left;">Onaqui NEON</td>
<td style="text-align: left;">Evergreen Forest|Shrub/Scrub</td>
<td style="text-align: right;">40.17760</td>
<td style="text-align: right;">-112.45245</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/onaq</td>
</tr>
<tr class="even">
<td style="text-align: left;">ORNL</td>
<td style="text-align: left;">Oak Ridge NEON</td>
<td style="text-align: left;">Deciduous Forest|Evergreen Forest|Pasture/Hay</td>
<td style="text-align: right;">35.96413</td>
<td style="text-align: right;">-84.28259</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/ornl</td>
</tr>
<tr class="odd">
<td style="text-align: left;">OSBS</td>
<td style="text-align: left;">Ordway-Swisher Biological Station NEON</td>
<td style="text-align: left;">Emergent Herbaceous Wetlands|Evergreen Forest|Woody Wetlands</td>
<td style="text-align: right;">29.68928</td>
<td style="text-align: right;">-81.99343</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/osbs</td>
</tr>
<tr class="even">
<td style="text-align: left;">PUUM</td>
<td style="text-align: left;">Pu’u Maka’ala Natural Area Reserve NEON</td>
<td style="text-align: left;">Evergreen Forest</td>
<td style="text-align: right;">19.55309</td>
<td style="text-align: right;">-155.31731</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/puum</td>
</tr>
<tr class="odd">
<td style="text-align: left;">RMNP</td>
<td style="text-align: left;">Rocky Mountains NEON</td>
<td style="text-align: left;">Evergreen Forest</td>
<td style="text-align: right;">40.27590</td>
<td style="text-align: right;">-105.54596</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/rmnp</td>
</tr>
<tr class="even">
<td style="text-align: left;">SCBI</td>
<td style="text-align: left;">Smithsonian Conservation Biology Institute NEON</td>
<td style="text-align: left;">Deciduous Forest|Evergreen Forest|Pasture/Hay</td>
<td style="text-align: right;">38.89292</td>
<td style="text-align: right;">-78.13949</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/scbi</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SERC</td>
<td style="text-align: left;">Smithsonian Environmental Research Center NEON</td>
<td style="text-align: left;">Cultivated Crops|Deciduous Forest</td>
<td style="text-align: right;">38.89013</td>
<td style="text-align: right;">-76.56001</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/serc</td>
</tr>
<tr class="even">
<td style="text-align: left;">SJER</td>
<td style="text-align: left;">San Joaquin Experimental Range NEON</td>
<td style="text-align: left;">Evergreen Forest|Grassland/Herbaceous|Shrub/Scrub</td>
<td style="text-align: right;">37.10878</td>
<td style="text-align: right;">-119.73228</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/sjer</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SOAP</td>
<td style="text-align: left;">Soaproot Saddle NEON</td>
<td style="text-align: left;">Evergreen Forest|Shrub/Scrub</td>
<td style="text-align: right;">37.03337</td>
<td style="text-align: right;">-119.26219</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/soap</td>
</tr>
<tr class="even">
<td style="text-align: left;">SRER</td>
<td style="text-align: left;">Santa Rita Experimental Range NEON</td>
<td style="text-align: left;">Shrub/Scrub</td>
<td style="text-align: right;">31.91068</td>
<td style="text-align: right;">-110.83549</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/srer</td>
</tr>
<tr class="odd">
<td style="text-align: left;">STEI</td>
<td style="text-align: left;">Steigerwaldt-Chequamegon NEON</td>
<td style="text-align: left;">Deciduous Forest|Mixed Forest|Woody Wetlands</td>
<td style="text-align: right;">45.50894</td>
<td style="text-align: right;">-89.58637</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/stei</td>
</tr>
<tr class="even">
<td style="text-align: left;">STER</td>
<td style="text-align: left;">North Sterling NEON</td>
<td style="text-align: left;">Cultivated Crops</td>
<td style="text-align: right;">40.46189</td>
<td style="text-align: right;">-103.02929</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/ster</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TALL</td>
<td style="text-align: left;">Talladega National Forest NEON</td>
<td style="text-align: left;">Deciduous Forest|Evergreen Forest|Mixed Forest</td>
<td style="text-align: right;">32.95047</td>
<td style="text-align: right;">-87.39326</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/tall</td>
</tr>
<tr class="even">
<td style="text-align: left;">TEAK</td>
<td style="text-align: left;">Lower Teakettle NEON</td>
<td style="text-align: left;">Evergreen Forest|Shrub/Scrub</td>
<td style="text-align: right;">37.00583</td>
<td style="text-align: right;">-119.00602</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/teak</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TOOL</td>
<td style="text-align: left;">Toolik Field Station NEON</td>
<td style="text-align: left;">Dwarf Scrub|Shrub/Scrub</td>
<td style="text-align: right;">68.66109</td>
<td style="text-align: right;">-149.37047</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/tool</td>
</tr>
<tr class="even">
<td style="text-align: left;">TREE</td>
<td style="text-align: left;">Treehaven NEON</td>
<td style="text-align: left;">Deciduous Forest|Evergreen Forest|Mixed Forest|Woody Wetlands</td>
<td style="text-align: right;">45.49369</td>
<td style="text-align: right;">-89.58571</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/tree</td>
</tr>
<tr class="odd">
<td style="text-align: left;">UKFS</td>
<td style="text-align: left;">University of Kansas Field Station NEON</td>
<td style="text-align: left;">Deciduous Forest|Pasture/Hay</td>
<td style="text-align: right;">39.04043</td>
<td style="text-align: right;">-95.19215</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/ukfs</td>
</tr>
<tr class="even">
<td style="text-align: left;">UNDE</td>
<td style="text-align: left;">University of Notre Dame Environmental Research Center NEON</td>
<td style="text-align: left;">Deciduous Forest|Mixed Forest|Woody Wetlands</td>
<td style="text-align: right;">46.23391</td>
<td style="text-align: right;">-89.53725</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/unde</td>
</tr>
<tr class="odd">
<td style="text-align: left;">WOOD</td>
<td style="text-align: left;">Chase Lake National Wildlife Refuge NEON</td>
<td style="text-align: left;">Emergent Herbaceous Wetlands|Grassland/Herbaceous</td>
<td style="text-align: right;">47.12820</td>
<td style="text-align: right;">-99.24133</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/wood</td>
</tr>
<tr class="even">
<td style="text-align: left;">WREF</td>
<td style="text-align: left;">Wind River Experimental Forest NEON</td>
<td style="text-align: left;">Evergreen Forest</td>
<td style="text-align: right;">45.82049</td>
<td style="text-align: right;">-121.95191</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/wref</td>
</tr>
<tr class="odd">
<td style="text-align: left;">YELL</td>
<td style="text-align: left;">Yellowstone National Park NEON</td>
<td style="text-align: left;">Evergreen Forest|Grassland/Herbaceous|Shrub/Scrub</td>
<td style="text-align: right;">44.95348</td>
<td style="text-align: right;">-110.53914</td>
<td style="text-align: left;">https://www.neonscience.org/field-sites/yell</td>
</tr>
</tbody>
</table>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    if (id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        return container.innerHTML
      } else {
        return note.innerHTML;
      }
    } else {
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      try { hash = new URL(url).hash; } catch {}
      const id = hash.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note !== null) {
        try {
          const html = processXRef(id, note);
          instance.setContent(html);
        } finally {
          instance.enable();
          instance.show();
        }
      } else {
        // See if we can fetch this
        fetch(url.split('#')[0])
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.getElementById(id);
          console.log(htmlDoc.body.innerHTML);
          if (note !== null) {
            const html = processXRef(id, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Aquatics.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Theme: Aquatic Ecosystems</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Ticks.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Theme: Tick Populations</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>